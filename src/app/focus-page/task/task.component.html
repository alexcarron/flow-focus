<div id="taskDescriptionContainer">
	<h1
		shrinkToFit
		id="taskDescription"
		class="progress-bar"
		contenteditable
		[textContent]="getDescription()"
		(input)="onDescriptionChange($event)"
		[style.--progress]="getProgressPercentage()"
	> </h1>
</div>
<div #taskSteps>
	<array-input
		#taskPreviousSteps
		*ngIf="isFocusedOnNextStep()"
		[initialValue]="this.task.getPreviousSteps()"
		(onInputChange)="onPreviousStepsChange($event)"
	>
	</array-input>
	<h2
		#taskNextStep
		id="taskNextStep"
		*ngIf="hasSteps()"
		contenteditable
		[textContent]="getNextStep()"
		(input)="onNextStepChange($event)"
	>
	</h2>
	<array-input
		#taskUpcomingSteps
		*ngIf="isFocusedOnNextStep()"
		[initialValue]="this.task.getUpcomingSteps()"
		(onInputChange)="onUpcomingStepsChange($event)"
	>
	</array-input>
</div>

<div id="taskControls">
	<p
		*ngIf="this.timeLeft"
		class="popup-opener"
		(click)="openPopup()"
		(keyDown)="openPopup()"
	>{{ this.timeLeft }}</p>

	<button
		id="skipButton"
		*ngIf="isSkippable()"
		class="icon-button"
		(click)="skip()"
	>
		<img src="assets/skip-icon.svg" alt="Skip">
		<span class="tooltip">Skip</span>
	</button>

	<button
		id="completeButton"
		class="icon-button"
		(click)="complete()"
	>
		<img id="unfilledCompleteIcon" src="assets/complete-unfilled-icon.svg" alt="Complete">
		<img id="filledCompleteIcon" src="assets/complete-filled-icon.svg" alt="Complete">
		<span class="tooltip">Complete</span>
	</button>
</div>


<datetime-popup
	*ngIf="isPopupOpen"
	[oldTimingOptions]="task.getTaskTimingOptions()"
	(closePopup)="closePopup()"
	(onConfirm)="onPopoutConfirm($event)"
>
</datetime-popup>