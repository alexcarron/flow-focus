<button
	id="goToFocusButton"
	class="fade-in-on-hover icon-button row-corner-button"
	[routerLink]="['/']"
>
	<img src="assets/magnify-check-icon.svg" alt="To Task Focus">
	<span class="tooltip">To Task Focus</span>
</button>

<button
	id="createTaskButton"
	class="fade-in-on-hover icon-button row-corner-button"
	[routerLink]="['/create-task']"
>
	<img src="assets/plus-icon.svg" alt="Create Task">
	<span class="tooltip">Create Task</span>
</button>

<button
	id="toggleFilterButton"
	class="fade-in-on-hover icon-button row-corner-button"
	(click)="toggleFliter()"
>
	<img src="assets/filter-icon.svg" alt="Show Today's Tasks">
	<span class="tooltip">Show Today's Tasks</span>
</button>

<table data-vertable="ver6">
	<thead>
		<tr id="task-header">
			<th class="task-header-item checkbox-column"></th>
			<th class="task-header-item description-column">Name</th>
			<th class="task-header-item steps-column">Steps</th>
			<th class="task-header-item time-available-column">Time Available</th>
			<th class="task-header-item deadline-column">Deadline</th>
			<th class="task-header-item duration-column">Duration</th>
			<th class="task-header-item repeat-column">Repeat</th>
			<th class="task-header-item action-column"></th>
		</tr>
	</thead>
	<tbody>
		<tr class="task-row" *ngFor="let task of getTasks();">
			<td class="task-row-item checkbox-column">
				<div>
					<checkbox-input
						class="completedCheckbox"
						[initialValue]="task.getIsComplete()"
						(onInputChange)="onCompleteChange(task, $event)"
					></checkbox-input>
					<checkbox-input
						class="mandatoryCheckbox"
						[initialValue]="task.getIsMandatory()"
						(onInputChange)="onMandatoryChange(task, $event)"
					></checkbox-input>
				</div>
			</td>
			<td class="task-row-item description-column">
				<text-input
					class="description-input"
					[initialValue]="task.getDescription()"
					(onInputChange)="onDescriptionChange(task, $event)"
				>
				</text-input>
			</td>
			<td class="task-row-item steps-column">
				<div>
					<div class="steps-preview-container flex-row">
						<text-input
							*ngFor="let step of task.getSteps();  let index = index; trackBy: trackStepByIndex"
							class="step-item step-input"
							[initialValue]="step"
							(onInputChange)="onStepChange(task, step, $event)"
						>
						</text-input>
					</div>
				</div>
			</td>
			<td class="task-row-item time-available-column">
				<div>
					<p *ngIf="!willTaskBeAlwaysAvailable(task)" class="table-time-value">
						{{this.getTaskStartTime(task) | dateFormatter:'Now'}}
					</p>
					<p *ngIf="task.getEndTime()" class="middle-label">to</p>
					<p *ngIf="task.getEndTime()" class="table-time-value">
						{{task.getEndTime() | dateFormatter:'Forever'}}
					</p>
				</div>
			</td>
			<td class="task-row-item deadline-column">
				<p *ngIf="task.getDeadline()" class="table-time-value">{{task.getDeadline() | dateFormatter:'None'}}</p>
			</td>
			<td class="task-row-item duration-column">
				<div>
					<p class="table-time-value">
						{{ getDurationRangeStrings(
							task.getMinRequiredTime(),
							task.getMaxRequiredTime(getCurrentTime())
						)[0] }}
					</p>
					<p *ngIf="!task.hasSingletonDuration() && task.hasMaxRequiredTime()" class="middle-label">to</p>
					<p *ngIf="!task.hasSingletonDuration() && task.hasMaxRequiredTime()" class="table-time-value">
						{{ getDurationRangeStrings(
							task.getMinRequiredTime(),
							task.getMaxRequiredTime(getCurrentTime())
						)[1] }}
					</p>
				</div>
			</td>
			<td class="task-row-item repeat-column">
				<div *ngIf="task.isRecurring()">
					<p class="middle-label">Every</p>
					<p class="table-time-value">
						{{ toDurationString(task.getRepeatInterval()!) | titlecase }}
					</p>
				</div>
			</td>
			<td class="task-row-item action-column">
				<div>
					<button
						#editButton
						id="editButton"
						class="icon-button edit-button"
						(click)="openTimingOptionsPopup(task)"
						(keyDown)="openTimingOptionsPopup(task)"
					>
						<img src="assets/pencil-icon.svg" alt="Edit">
					</button>
					<button
						#deleteButton
						id="deleteButton"
						class="icon-button delete-button"
						(click)="deleteTask(task)"
					>
						<img src="assets/delete-icon.svg" alt="Delete">
					</button>
				</div>
			</td>
		</tr>
	</tbody>
</table>

<task-timing-options-popup
	#timingOptionsPopup
>
</task-timing-options-popup>